// =============================================================================
// Color Palette (Gruvbox-inspired)
// =============================================================================
$dark-bg: #1D2021;
$off-focus: #433F3C;
$highlight: #EBDBB2;

$accent-blue: #427F82;
$accent-yellow: #D79921;
$accent-red: #EA6926;
$accent-green: #689D6A;
$accent-orange: #E0944F;

// =============================================================================
// Mixins
// =============================================================================

// Shared container styles for startbox/endbox
@mixin panel-container {
  background: $dark-bg;
  color: $dark-bg;
  border: 2px solid $off-focus;
  border-top: none;
  border-radius: 0 0 8px 8px;
  transition: border-color 300ms ease;

  &:hover {
    border-color: $accent-orange;
  }
}

// Base chevron/triangle styles
@mixin chevron-base {
  margin: 0;
  font-size: 1em;
}

// Powerline segment with accent background
@mixin powerline-segment($bg-color) {
  padding: 0 8px;
  background: $bg-color;
  color: $dark-bg;
}

// =============================================================================
// Bar Window
// =============================================================================
window.Bar {
  background: transparent;
  font-family: "JetBrainsMono Nerd Font", monospace;
  font-weight: bold;

  > centerbox {
    background: transparent;
    margin: 0 6px;
  }

  // ===========================================================================
  // Left Panel (startbox)
  // ===========================================================================
  #startbox {
    @include panel-container;

    > box {
      margin: 0 0 6px 0;
      padding: 0 8px;
    }

    // Powerline segments
    .userhost { @include powerline-segment($accent-blue); }
    .workspaces { background: $accent-yellow; }
    .window-title { @include powerline-segment($accent-red); }

    // Workspace buttons
    .workspace {
      padding: 0 4px;
      margin: 0;
      min-height: 0;
      min-width: 0;
      background: $accent-yellow;
      color: $dark-bg;
      border: none;
      border-radius: 0;
      opacity: 1;
      transition: box-shadow 300ms ease, padding 100ms ease, opacity 100ms ease;

      &.entering {
        padding: 0;
        opacity: 0;
      }

      &.active {
        box-shadow: 0 3px 0 0 $highlight;
      }
    }

    // Chevrons (powerline transitions)
    #chevron-open {
      @include chevron-base;
      color: $dark-bg;
      background: $accent-blue;
    }

    #chevron-mid {
      @include chevron-base;
      color: $accent-blue;
      background: $accent-yellow;
    }

    #chevron-yellow-red {
      @include chevron-base;
      color: $accent-yellow;
      background: $accent-red;
    }

    #chevron-right {
      @include chevron-base;
      color: $accent-red;
      background: $dark-bg;
    }
  }

  // ===========================================================================
  // Right Panel (endbox)
  // ===========================================================================
  #endbox {
    @include panel-container;
  }

  // ===========================================================================
  // Clock Widget
  // ===========================================================================
  .clock {
    margin: 0;
    background: transparent;
    border: none;
    border-radius: 0;

    > button {
      padding: 0 8px;
      margin: 0;
      min-height: 0;
      min-width: 0;
    }

    .time {
      @include powerline-segment($accent-green);
    }

    .chevron {
      @include chevron-base;
      color: $accent-green;
      background: $dark-bg;

      &#chevron-right {
        color: $dark-bg;
        background: $accent-green;
      }
    }

    .hour-segments {
      margin: 0 0 2px 10px;

      .hour-segment {
        min-height: 4px;
        margin-right: 2px;
        transition: background 300ms ease;
      }
    }
  }
}
