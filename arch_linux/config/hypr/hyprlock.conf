# Hyprlock Configuration - Gruvbox Theme
# ref: https://wiki.hypr.land/Hypr-Ecosystem/hyprlock/

# =============================================================================
# Color Palette (Gruvbox-inspired, matching AGS setup)
# =============================================================================
$font = JetBrainsMono Nerd Font

# Hex values for pango markup (used in cmd[] echo statements)
$c-dark-bg = 1D2021
$c-off-focus = 433F3C
$c-highlight = EBDBB2
$c-blue = 427F82
$c-yellow = D79921
$c-red = EA6926
$c-green = 689D6A
$c-orange = E0944F

# RGB/RGBA values for native hyprlock properties
$dark-bg = rgb($c-dark-bg)
$dark-bg-transparent = rgba(1D2021ee)
$off-focus = rgb($c-off-focus)
$highlight = rgb($c-highlight)

$accent-blue = rgb($c-blue)
$accent-yellow = rgb($c-yellow)
$accent-red = rgb($c-red)
$accent-green = rgb($c-green)
$accent-orange = rgb($c-orange)

# =============================================================================
# General
# =============================================================================
general {
    hide_cursor = false
}

animations {
    enabled = true
    bezier = smooth, 0.4, 0, 0.2, 1
    animation = fadeIn, 1, 5, smooth
    animation = fadeOut, 1, 5, smooth
    animation = inputFieldDots, 1, 2, smooth
}

# =============================================================================
# Background
# =============================================================================
background {
    monitor =
    path = screenshot
    blur_passes = 4
    blur_size = 6
    noise = 0.02
    contrast = 0.9
    brightness = 0.7
    vibrancy = 0.15
}

# =============================================================================
# Login Container (shape behind input)
# =============================================================================
shape {
    monitor =
    size = 700, 200
    color = $dark-bg-transparent
    rounding = 8
    border_size = 2
    border_color = $off-focus

    position = 0, 0
    halign = center
    valign = center
    zindex = -1
}

# =============================================================================
# User Label
# =============================================================================
label {
    monitor =
    text = cmd[] echo "<span foreground='##$c-highlight'>&gt; </span><span foreground='##$c-blue'>$USER@$(uname -n)</span>"
    font_family = $font
    font_size = 24

    position = -180, 50
    halign = center
    valign = center

    shadow_passes = 2
    shadow_size = 3
}

# =============================================================================
# Input Field
# =============================================================================
input-field {
    monitor =
    size = 600, 60
    outline_thickness = 3
    rounding = 8

    outer_color = $accent-blue $accent-green 45deg
    inner_color = $dark-bg
    font_color = $highlight

    check_color = $accent-green
    fail_color = $accent-red
    capslock_color = $accent-yellow
    numlock_color = $accent-orange
    bothlock_color = $accent-red

    fade_on_empty = false
    font_family = $font
    placeholder_text = <i>Enter password...</i>
    fail_text = <b>$PAMFAIL</b>

    dots_size = 0.3
    dots_spacing = 0.3
    dots_center = false

    position = 0, -20
    halign = center
    valign = center
}

# =============================================================================
# Caps Lock Indicator
# =============================================================================
label {
    monitor =
    text = cmd[update:100] cat /sys/class/leds/input*::capslock/brightness | grep -q 1 && echo "<span foreground='##$c-yellow'> CAPS LOCK</span>"
    font_family = $font
    font_size = 12

    position = 0, -70
    halign = center
    valign = center

    shadow_passes = 1
    shadow_size = 2
}

# =============================================================================
# Time & Date Display
# =============================================================================
label {
    monitor =
    text = cmd[update:1000] echo -e "<span size='90000' foreground='##$c-highlight'>$(date +'%H:%M')</span>\n<span size='25000' foreground='##$c-yellow'>$(date +'%A, %d %B %Y')</span>"
    font_family = $font
    text_align = right

    position = -30, -30
    halign = right
    valign = top

    shadow_passes = 2
    shadow_size = 4
}

# =============================================================================
# System Uptime
# =============================================================================
label {
    monitor =
    text = cmd[update:60000] echo "<span foreground='##$c-highlight'> </span><span foreground='##$c-orange'>$(uptime -p)</span>"
    font_family = $font
    font_size = 14

    position = -30, 30
    halign = right
    valign = bottom

    shadow_passes = 1
    shadow_size = 2
}
